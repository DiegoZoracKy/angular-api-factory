/**
 * Angular API Factory
 *
 * Gets an object literal with a desired API's structure and based on it, creates a well defined interface to handle ajax calls ($http).
 *
 * Check: https://github.com/DiegoZoracKy/AjaxAPIFactory
 *
 * @author Diego ZoracKy | @DiegoZoracKy | http://diegozoracky.com
 */

!function(){"use strict";function a(a){var t=[];for(var e in a)t.push(e+"="+a[e]);return t.join("&")}var t=angular.module("apiFactory",[]);t.factory("ApiFactoryAjax",["$http","$q",function(t,e){function r(r,n){var d=angular.extend({},r);if(r.extendConfig&&r.extendConfig(d,n),d.data=r.data&&r.data.defaults?angular.extend({},r.data.defaults,n):n,r.data&&(r.data.validate||"undefined"==typeof r.data.validate)){var i=!0;for(var u in r.data.required)i&=!!(d.data[r.data.required[u]]||"number"==typeof d.data[r.data.required[u]]&&null!==d.data[r.data.required[u]]);if(!i){var o=e.reject("Missing required params :: "+r.data.required.join(", ")+". Current params :: "+Object.keys(d.data).join(", "));return o.error=function(a){return o.then(null,function(t){a(t,null,null,d)})},o}}return r.method&&"get"!=r.method.toLowerCase()||(d.params=d.data),d.headers&&d.headers["Content-Type"].indexOf("www-form")>=0&&(d.data=a(d.data)),t(d)}function n(a){return function(t){return r.call(this,a,t)}}function d(a,t){for(var e in t)t[e].apiSchema?(a[e]=n(t[e].apiSchema),a[e].schema=t[e].apiSchema):(a[e]={},d(a[e],t[e]))}return function(a){d(this,a)}}])}();